# Data Preparation
This folder contains all codes and files needed for summarizing the relationship between xpath, expressions and standardized expressions from all spectra data in NanoMine.

### Files
- prepRawData.py
  - The script that generates intermediate csv files for human inspections and polishing.

- nameXpathPairsManualStd.csv
  - A csv file of some manually standardized expressions with their corresponding xpath.

- rawData.csv
  - A full table with all information extracted. Generated by prepRawData.py.

- rawDataUnique.csv
  - A concise version of rawData.csv without duplicated rows (file column is ignored during the duplication evaluation).

- **rawDataUnique.xlsx**
  - The after-human-inspection version of rawDataUnique.csv. This file will be used in the further processing steps.

- **additionalDataUnique.xlsx**
  - The spreadsheet share the same format with rawDataUnique.xlsx. This file acts as an additional source of name pair informations. This file will be used in the further processing steps.

- rawToJSON.py
  - The script that reads rawDataUnique.xlsx and additionalDataUnique.xlsx to generate the json file to be loaded in the `spectraHeaderParser` object.

- **nanomineParserConfig.json**
  - This file will be loaded into the `spectraHeaderParser` object.

- xName/xUnit/yName/yUnit.csv
  - Tables of specific fields. For reference purposes only.

### Procedures for updating raw data with new xmls.
1. Backup everything.
2. Move all new xmls into a folder. Remember the directory.
3. Update `xmlDir` in prepRawData.py with the directory. Update `ignore` as needed.
4. Run prepRawData.py.
5. Inspect the newly generated rawDataUnique.csv and polish it.
  - fill in the blank cells where the split function fails to split x/yRaw_header into x/yName and x/yUnit
  - correct the wrongly splitted x/yName and x/yUnit
  - use the original rawDataUnique.xlsx as a reference, fill in *stdXUnit*, *xUnitType*, *stdYUnit*, *yUnitType*
  - label rows where xpath is incorrect or other curation errors with a 'Y' in the *ignore* column
6. Append the polished rows of data to rawDataUnique.xlsx.
7. Make adjustments and additions to additionalDataUnique.xlsx as needed.
8. Run rawToJSON.py to generate new nanomineParserConfig.json.
